<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head></h:head>
<h:body>
	<h:form>
		<p:growl id="growl" showDetail="true" life="8000" />
		<p:panelGrid id="pgDetalhes" styleClass="ui-noborder">
			<p:row>
				<p:column>
					<h1>Dados do pedido</h1>
					<p:panelGrid styleClass="ui-noborder">
						<p:row>
							<p:column>
								<h:outputText value="ID:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.id}" />
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<h:outputText value="Data do pedido:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.dtCadastro}" />
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<p:panelGrid id="cliente" styleClass="ui-noborder">
						<p:row>
							<p:column>
								<h1>Dados do cliente</h1>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<h:outputText value="Nome:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.cliente.nome}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<h:outputText value="Email:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.cliente.email}"/>
							</p:column>
						</p:row>
						
					</p:panelGrid>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<p:panelGrid id="endEntrega" styleClass="ui-noborder">
						<p:row>
							<p:column>
								<h1>Endereço de entrega</h1>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Título:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.titulo}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Tipo de residência:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.tipoResidencia}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Tipo de logradouro:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.tipoLogradouro}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Logradouro:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.logradouro}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Número:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.numero}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Bairro:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.bairro}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="CEP:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.cep}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="País:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.cidade.estado.pais.nome}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Estado:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.cidade.estado.nome}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Cidade:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.cidade.nome}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Observações:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.endEntrega.observacoes}"/>
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h1>Frete</h1>
					<p:panelGrid styleClass="ui-noborder">
						<p:row>
							<p:column>
								<p:outputLabel value="Tipo de envio:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.custoFrete.frete.tipoEnvio}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Prazo de entrega:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.custoFrete.prazoEntrega} dias úteis"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Valor:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputText value="#{adminMB.pedidoSelecionado.custoFrete.valor}"/>
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h1>Itens do pedido</h1>
					<p:dataTable var="item" value="#{adminMB.pedidoSelecionado.itens}">
						<p:column headerText="ID">
							<h:outputText value="#{item.id}" />
						</p:column>
						<p:column headerText="TITULO">
							<h:outputText value="#{item.estoque.livro.titulo}" />
						</p:column>
						<p:column headerText="QTDE">
							<h:outputText value="#{item.qtde}" />
						</p:column>
						<p:column headerText="VALOR UNITÁRIO">
							<h:outputText value="#{item.valorUnitario}" />
						</p:column>
					</p:dataTable>
				</p:column>
			</p:row>
			<p:row rendered="#{adminMB.pedidoSelecionado.cupomPromocional != null}">
				<p:column>
					<h1>Cupom promocional</h1>
					<p:panelGrid styleClass="ui-noborder">
						<p:row>
							<p:column>
								<p:outputLabel value="Código:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputLabel value="#{adminMB.pedidoSelecionado.cupomPromocional.codigo}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Porcentagem de desconto:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<h:outputLabel value="#{adminMB.pedidoSelecionado.cupomPromocional.porcentagemDesconto}"/>
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h1>Pagamentos</h1>
					<p:panelGrid styleClass="ui-noborder">
						<p:row>
							<p:column colspan="3">
								<p:dataTable var="pagamento" value="#{adminMB.pedidoSelecionado.pagamentos}">
									<p:column headerText="ID">
										<p:outputLabel value="#{pagamento.id}"/>
									</p:column>
									<p:column headerText="Forma pgto">
										<p:outputLabel rendered="#{pagamento.formaPgto.cartao != null}" value="Cartão de crédito"/>
										<p:outputLabel rendered="#{pagamento.formaPgto.cupomTroca != null}" value="Cupom de troca"/>
									</p:column>
									<p:column headerText="Valor">
										<p:outputLabel value="#{pagamento.valor}"/>
									</p:column>
									<p:column headerText="Status">
										<p:outputLabel value="#{pagamento.status}"/>
									</p:column>
								</p:dataTable>
							</p:column>
						</p:row>
						<p:row><p:column><p:spacer></p:spacer></p:column></p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Valor total dos produtos:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<p:outputLabel value="#{adminMB.pedidoSelecionado.valorTotal}"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:outputLabel value="Valor final:" style="font-weight: bold;"/>
							</p:column>
							<p:column>
								<p:outputLabel value="#{adminMB.pedidoSelecionado.valorTotalComDescontos}"/>
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h1>Status do pedido</h1>
					<p:panelGrid styleClass="ui-noborder">
						<p:row>
							<column>
								<p:selectOneRadio value="#{adminMB.statusTemp}">
									<f:selectItem itemLabel="EM PROCESSAMENTO" itemValue="1" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 1}"/>
									<f:selectItem itemLabel="APROVADO" itemValue="2" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 999}"/>
									<f:selectItem itemLabel="EM TRANSPORTE" itemValue="4" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 2}"/>
									<f:selectItem itemLabel="ENTREGUE" itemValue="5" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 4}"/>
									<f:selectItem itemLabel="EM TROCA" itemValue="7" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 7}"/>
									<f:selectItem itemLabel="TROCADO" itemValue="8" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 7}"/>
									<f:selectItem itemLabel="REPROVADO" itemValue="3" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 3}"/>
									<f:selectItem itemLabel="CANCELADO" itemValue="6" itemDisabled="#{adminMB.pedidoSelecionado.statusPedido != 6}"/>
								</p:selectOneRadio>
							</column>
						</p:row>
						<p:row><p:column><p:spacer></p:spacer></p:column></p:row>
						<p:row>
							<p:column>
								<p:commandButton value="Atualizar status" actionListener="#{adminMB.atualizarPedido}" 
									update="growl pgDetalhes" disabled="#{adminMB.pedidoSelecionado.statusPedido == 1}"/>
								<p:commandButton value="Veriricar pagamento" actionListener="#{adminMB.verificarPagamento}" 
									update="growl pgDetalhes" disabled="#{adminMB.pedidoSelecionado.statusPedido != 1}"/>
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:column>			
			</p:row>
		</p:panelGrid>
	</h:form>
</h:body>
</html>